<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>ZARTARANT v10.0 - DENİZ ZENGER</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial Black', sans-serif; }
        #bela-overlay { position: absolute; top: 30%; width: 100%; text-align: center; color: #ff4655; font-size: 100px; text-shadow: 0 0 30px #ff0000; z-index: 9000; display: none; pointer-events: none; }
        #crosshair { position: absolute; top: 50%; left: 50%; width: 10px; height: 10px; border: 2px solid #0f0; transform: translate(-50%, -50%); pointer-events: none; z-index: 100; }
        
        /* ORTAK PANEL STİLİ */
        .ui-panel {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(10,10,20,0.95); border: 3px solid #ff4655;
            color: white; padding: 25px; display: none; z-index: 10000; box-shadow: 0 0 50px #000; min-width: 250px;
        }
        .opt { padding: 12px; margin: 8px 0; background: #222; cursor: pointer; text-align: center; border: 1px solid #444; }
        .opt:hover { background: #ff4655; }

        /* HUD */
        #hud-top { position: absolute; top: 20px; right: 20px; z-index: 1000; }
        .stat-box { background: rgba(255, 70, 85, 0.9); color: white; padding: 10px 25px; font-size: 24px; border-radius: 5px; }
        #hud-bottom { position: absolute; bottom: 30px; left: 30px; z-index: 1000; }
        .hp-box { background: rgba(0,0,0,0.8); color: #00ff00; padding: 10px 20px; border-left: 5px solid #00ff00; font-size: 24px; }

        #start-screen { position: absolute; width: 100%; height: 100%; background: #000; color: #ff4655; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 11000; cursor: pointer; }
    </style>
</head>
<body>

    <div id="start-screen"><h1>ZARTARANT v10.0</h1><p>DENİZ ZENGER SUNAR...<br>BAŞLATMAK İÇİN TIKLA</p></div>
    <div id="bela-overlay">BELA</div>

    <div id="h-panel" class="ui-panel">
        <h2 style="text-align:center; color:#ff4655; margin:0 0 15px 0;">HACK MENU</h2>
        <div class="opt" onclick="applySkin('PRIME')">ASİL SKIN</div>
        <div class="opt" onclick="applySkin('ELDERFLAME')">EJDER SKIN</div>
        <div class="opt" onclick="toggleCheat('esp')">ESP: <span id="s-esp">KAPALI</span></div>
        <div class="opt" onclick="toggleCheat('aim')">AIMBOT: <span id="s-aim">KAPALI</span></div>
        <div class="opt" onclick="closePanels()" style="background:#444">KAPAT</div>
    </div>

    <div id="m-panel" class="ui-panel" style="border-color: #00ffff;">
        <h2 style="text-align:center; color:#00ffff; margin:0 0 15px 0;">MARKET (B)</h2>
        <div class="opt" onclick="buyWeapon('VANDAL', 0x222222)">VANDAL</div>
        <div class="opt" onclick="buyWeapon('PHANTOM', 0x333344)">PHANTOM</div>
        <div class="opt" onclick="buyWeapon('OPERATOR', 0x111111)">OPERATOR</div>
        <div class="opt" onclick="closePanels()" style="background:#444">KAPAT</div>
    </div>

    <div id="crosshair"></div>
    <div id="hud-top"><div class="stat-box">KILLS: <span id="kill-val">0</span></div></div>
    <div id="hud-bottom"><div class="hp-box">HP: <span id="hp-val">100</span> | SİLAH: <span id="weapon-val">VANDAL</span></div></div>

    <script type="importmap"> { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } } </script>

    <script type="module">
        import * as THREE from 'three';

        let cheats = { esp: false, aim: false }, enemies = [], keys = {}, kills = 0, hp = 100;
        let activePanel = null; 
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(f, d, v) {
            const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
            o.type = 'square'; o.frequency.setValueAtTime(f, audioCtx.currentTime);
            g.gain.setValueAtTime(v, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + d);
            o.connect(g); g.connect(audioCtx.destination);
            o.start(); o.stop(audioCtx.currentTime + d);
        }

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050508);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.rotation.order = 'YXZ';
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        scene.add(new THREE.AmbientLight(0xffffff, 0.5));

        // --- ZEMİN ---
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(200, 200), new THREE.MeshStandardMaterial({color: 0x111111}));
        floor.rotation.x = -Math.PI/2; scene.add(floor);

        // --- PARLAYAN İMZA TABELASI ---
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 512; canvas.height = 128;
        ctx.fillStyle = '#ff4655'; ctx.font = 'Bold 40px Arial';
        ctx.fillText('DENİZ ZENGER TARAFINDAN YAPILDI', 0, 80);
        const textTex = new THREE.CanvasTexture(canvas);
        const sign = new THREE.Mesh(new THREE.PlaneGeometry(20, 5), new THREE.MeshBasicMaterial({ map: textTex, transparent: true, side: THREE.DoubleSide }));
        sign.position.set(0, 10, -20);
        scene.add(sign);

        // --- SİLAH ---
        const gun = new THREE.Group();
        const gBody = new THREE.Mesh(new THREE.BoxGeometry(0.12, 0.18, 0.7), new THREE.MeshStandardMaterial({color: 0x222}));
        const gGlow = new THREE.Mesh(new THREE.BoxGeometry(0.13, 0.04, 0.4), new THREE.MeshStandardMaterial({color: 0xff0000, emissive: 0xff0000}));
        gGlow.position.set(0, 0.08, -0.1); gun.add(gBody, gGlow);
        gun.position.set(0.4, -0.3, -0.6); camera.add(gun); scene.add(camera);

        // --- PANEL KONTROLLERİ ---
        const startDiv = document.getElementById('start-screen');
        startDiv.onclick = () => { document.body.requestPointerLock(); audioCtx.resume(); };

        window.closePanels = () => {
            document.getElementById('h-panel').style.display = 'none';
            document.getElementById('m-panel').style.display = 'none';
            activePanel = null; document.body.requestPointerLock();
        };

        window.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            if(e.code === 'Insert') {
                activePanel = (activePanel === 'hack') ? null : 'hack';
                document.getElementById('h-panel').style.display = (activePanel === 'hack') ? 'block' : 'none';
                if(activePanel) document.exitPointerLock(); else document.body.requestPointerLock();
            }
            if(e.code === 'KeyB') {
                activePanel = (activePanel === 'market') ? null : 'market';
                document.getElementById('m-panel').style.display = (activePanel === 'market') ? 'block' : 'none';
                if(activePanel) document.exitPointerLock(); else document.body.requestPointerLock();
            }
        });
        window.addEventListener('keyup', (e) => keys[e.code] = false);

        document.addEventListener('mousemove', (e) => {
            if(document.pointerLockElement) {
                camera.rotation.y -= e.movementX * 0.002;
                camera.rotation.x = Math.max(-1.5, Math.min(1.5, camera.rotation.x - e.movementY * 0.002));
            }
        });

        // --- MARKET VE HİLE FONKSİYONLARI ---
        window.buyWeapon = (name, col) => {
            document.getElementById('weapon-val').innerText = name;
            gBody.material.color.setHex(col);
            playSound(300, 0.2, 0.2);
            closePanels();
        };
        window.applySkin = (s) => {
            if(s === 'PRIME') { gBody.material.color.setHex(0xd4af37); gGlow.material.emissive.setHex(0x00ffff); }
            if(s === 'ELDERFLAME') { gBody.material.color.setHex(0x550000); gGlow.material.emissive.setHex(0xffaa00); }
        };
        window.toggleCheat = (t) => {
            cheats[t] = !cheats[t];
            document.getElementById('s-'+t).innerText = cheats[t] ? 'AÇIK' : 'KAPALI';
        };

        // --- BOT SİSTEMİ ---
        function spawn() {
            const g = new THREE.Group();
            const b = new THREE.Mesh(new THREE.BoxGeometry(0.8, 1.6, 0.4), new THREE.MeshStandardMaterial({color: 0xff4655}));
            const skel = new THREE.LineSegments(
                new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,0.8,0), new THREE.Vector3(0,-0.8,0)]), 
                new THREE.LineBasicMaterial({color: 0x00ff00, depthTest: false, transparent: true, opacity: cheats.esp ? 1 : 0})
            );
            g.add(b, skel); g.userData = { hp: 100, lastShot: 0 };
            g.position.set((Math.random()-0.5)*60, 0.8, -20 - Math.random()*30);
            scene.add(g); enemies.push(g);
        }
        for(let i=0; i<6; i++) spawn();

        function animate() {
            requestAnimationFrame(animate);
            sign.rotation.y += 0.01; // İmza dönsün ve parlasın
            if(document.pointerLockElement) {
                const speed = 0.15;
                const forward = new THREE.Vector3(); camera.getWorldDirection(forward); forward.y = 0; forward.normalize();
                const right = new THREE.Vector3().crossVectors(forward, camera.up).normalize();

                if(keys['KeyW']) camera.position.add(forward.clone().multiplyScalar(speed));
                if(keys['KeyS']) camera.position.add(forward.clone().multiplyScalar(-speed));
                if(keys['KeyA']) camera.position.add(right.clone().multiplyScalar(-speed));
                if(keys['KeyD']) camera.position.add(right.clone().multiplyScalar(speed));
                camera.position.y = 1.6;

                enemies.forEach(e => {
                    e.lookAt(camera.position.x, 0.8, camera.position.z);
                    const dist = e.position.distanceTo(camera.position);
                    if(dist > 7) e.translateZ(0.04);
                    if(dist < 15 && Date.now() - e.userData.lastShot > 2000) {
                        e.userData.lastShot = Date.now();
                        hp -= 10; document.getElementById('hp-val').innerText = hp;
                        if(hp <= 0) location.reload();
                    }
                });

                if(cheats.aim && enemies.length > 0) camera.lookAt(enemies[0].position.x, 1.8, enemies[0].position.z);
            }
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('mousedown', () => {
            if(!document.pointerLockElement || activePanel) return;
            playSound(200, 0.1, 0.1);
            const ray = new THREE.Raycaster();
            ray.setFromCamera(new THREE.Vector2(0,0), camera);
            const hits = ray.intersectObjects(enemies, true);
            if(hits.length > 0) {
                let t = hits[0].object.parent;
                scene.remove(t); enemies.splice(enemies.indexOf(t),1); spawn();
                kills++; document.getElementById('kill-val').innerText = kills;
                if(kills % 5 === 0) {
                    const b = document.getElementById('bela-overlay');
                    b.style.display = 'block'; setTimeout(() => b.style.display = 'none', 5000);
                }
            }
        });
    </script>
</body>
</html>