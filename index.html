<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Valorant JS - Galaxy Edition</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #050a14; font-family: 'Segoe UI', sans-serif; }
        
        /* SOL MARKET MENÃœSÃœ (GÃ¶rseldeki gibi) */
        #side-market {
            position: absolute; left: 20px; top: 15%; width: 250px;
            background: rgba(15, 25, 35, 0.9); border-left: 4px solid #00ffcc;
            color: white; padding: 10px; display: none; z-index: 100;
        }
        .market-item {
            display: flex; align-items: center; gap: 10px; padding: 10px;
            border-bottom: 1px solid #333; cursor: pointer; transition: 0.2s;
        }
        .market-item:hover { background: rgba(0,255,204,0.1); }
        .market-item img { width: 40px; height: 40px; background: #222; border-radius: 4px; }

        /* ALT YETENEK BARÄ° (GÃ¶rseldeki gibi) */
        #ability-bar {
            position: absolute; bottom: 20px; left: 20px; display: flex;
            align-items: center; gap: 5px; background: rgba(0,0,0,0.6); padding: 5px 15px; border-radius: 5px;
        }
        .ability-icon { width: 45px; height: 45px; border: 1px solid #00ffcc; display: flex; align-items: center; justify-content: center; color: #00ffcc; font-weight: bold; }
        .energy-fill { height: 4px; background: #00ffcc; width: 100px; margin-left: 10px; }

        /* SAÄž ALT MERMÄ° */
        #ammo-display {
            position: absolute; bottom: 20px; right: 40px; text-align: right; color: white;
        }

        #crosshair {
            position: absolute; top: 50%; left: 50%; width: 12px; height: 12px;
            border: 2px solid #00ffcc; transform: translate(-50%, -50%); pointer-events: none;
        }
    </style>
</head>
<body onclick="if(document.getElementById('side-market').style.display !== 'block') document.body.requestPointerLock()">

    <div id="side-market">
        <h3 style="margin-top:0;">B Market</h3>
        <div class="market-item" onclick="buy('Phantom')"><span>ðŸŒ€</span> <div><b>Phantom</b><br>2900</div></div>
        <div class="market-item" onclick="buy('Vandal')"><span>ðŸ”¥</span> <div><b>Vandal</b><br>2900</div></div>
        <div class="market-item" onclick="buy('Operator')"><span>ðŸŽ¯</span> <div><b>Operator</b><br>4700</div></div>
    </div>

    <div id="crosshair"></div>

    <div id="ability-bar">
        <div class="ability-icon" id="skill-c">C</div>
        <div class="ability-icon" id="skill-q">Q</div>
        <div class="ability-icon" id="skill-e" style="background: rgba(0,255,204,0.3)">E</div>
        <div id="energy-bar" class="energy-fill"></div>
        <div style="color: white; margin-left: 10px; font-size: 12px;">NEON ACTIVE</div>
    </div>

    <div id="ammo-display">
        <div id="weapon-name" style="color: #00ffcc; font-size: 14px;">PHANTOM</div>
        <div style="font-size: 48px; font-weight: bold;"><span id="ammo-count">25</span></div>
    </div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        let ammo = 25, energy = 100, isMarketOpen = false;
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xcccccc); // GÃ¶rseldeki aÃ§Ä±k gri poligon havasÄ±

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // --- POLÄ°GON ZEMÄ°N ---
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(200, 200), new THREE.MeshPhongMaterial({color: 0x999999}));
        floor.rotation.x = -Math.PI/2;
        scene.add(floor);
        scene.add(new THREE.GridHelper(200, 50, 0x000000, 0x888888));
        scene.add(new THREE.AmbientLight(0xffffff, 1));

        // --- GALAKSÄ° PHANTOM MODELÄ° (TEMSÄ°LÄ°) ---
        const gunGroup = new THREE.Group();
        const body = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.2, 0.8), new THREE.MeshPhongMaterial({color: 0x111122}));
        // GÃ¶rseldeki galaksi efekti iÃ§in parlayan bir detay ekleyelim
        const galaxyPart = new THREE.Mesh(new THREE.BoxGeometry(0.11, 0.15, 0.4), new THREE.MeshPhongMaterial({color: 0x00ccff, emissive: 0x0033ff}));
        galaxyPart.position.z = -0.1;
        gunGroup.add(body, galaxyPart);
        gunGroup.position.set(0.4, -0.3, -0.6);
        camera.add(gunGroup);
        scene.add(camera);

        // --- MOUSE KONTROL (YAMUKLUK GÄ°DERÄ°LDÄ°) ---
        document.addEventListener('mousemove', (e) => {
            if (document.pointerLockElement) {
                camera.rotation.y -= e.movementX * 0.002;
                let newX = camera.rotation.x - e.movementY * 0.002;
                camera.rotation.x = Math.max(-1.4, Math.min(1.4, newX));
            }
        });

        // --- TUÅžLAR ---
        document.addEventListener('keydown', (e) => {
            if(e.code === 'KeyB') {
                isMarketOpen = !isMarketOpen;
                document.getElementById('side-market').style.display = isMarketOpen ? 'block' : 'none';
                if(isMarketOpen) document.exitPointerLock();
            }
            // Neon E YeteneÄŸi (HÄ±zlanma)
            if(e.code === 'KeyE' && energy > 0) {
                document.getElementById('skill-e').style.background = "#00ffcc";
                setTimeout(() => document.getElementById('skill-e').style.background = "none", 2000);
            }
        });

        window.buy = (name) => {
            document.getElementById('weapon-name').innerText = name.toUpperCase();
            ammo = name === 'Operator' ? 5 : 25;
            document.getElementById('ammo-count').innerText = ammo;
            isMarketOpen = false;
            document.getElementById('side-market').style.display = 'none';
            document.body.requestPointerLock();
        }

        // --- ATEÅž ETME VE EFEKT ---
        document.addEventListener('mousedown', () => {
            if (document.pointerLockElement && ammo > 0) {
                ammo--;
                document.getElementById('ammo-count').innerText = ammo;
                
                // Namlu AteÅŸi Efekti (GÃ¶rseldeki gibi)
                const flash = new THREE.PointLight(0xffff00, 2, 5);
                flash.position.set(0.4, -0.2, -1.2);
                camera.add(flash);
                setTimeout(() => camera.remove(flash), 50);

                // Geri Tepme
                gunGroup.position.z += 0.05;
            }
        });

        function animate() {
            requestAnimationFrame(animate);
            if (document.pointerLockElement) {
                const speed = 0.15;
                if (window.keys?.['KeyW']) camera.translateZ(-speed);
                // Silah sallanma efekti
                gunGroup.position.y = -0.3 + Math.sin(Date.now() * 0.005) * 0.01;
                gunGroup.position.z += (-0.6 - gunGroup.position.z) * 0.1;
            }
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>