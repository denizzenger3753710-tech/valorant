<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>ZARTARANT</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Arial Black', sans-serif; }
        #crosshair { position: absolute; top: 50%; left: 50%; width: 12px; height: 12px; border: 2px solid #00ff00; transform: translate(-50%, -50%); pointer-events: none; z-index: 100; }
        
        /* ZARTARANT PANEL */
        #zartarant-panel {
            position: absolute; top: 20px; left: 20px; width: 280px;
            background: rgba(10, 10, 20, 0.95); border: 3px solid #ff4655;
            color: #fff; padding: 20px; display: none; z-index: 1000;
        }
        .hack-title { font-size: 24px; color: #ff4655; text-align: center; margin-bottom: 15px; text-transform: uppercase; }
        .btn { margin: 8px 0; cursor: pointer; padding: 10px; background: #1a1a1a; border: 1px solid #ff4655; text-align: center; transition: 0.3s; }
        .btn:hover { background: #ff4655; }
        
        #hud { position: absolute; bottom: 30px; width: 100%; display: flex; justify-content: space-between; padding: 0 50px; color: white; pointer-events: none; box-sizing: border-box; }
        .stat { background: rgba(0,0,0,0.8); padding: 15px; border-left: 5px solid #ff4655; font-size: 22px; }
        #click-to-start { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.8); color: white; display: flex; align-items: center; justify-content: center; z-index: 2000; cursor: pointer; font-size: 30px; }
    </style>
</head>
<body>

    <div id="click-to-start">ZARTARANT'I BAŞLATMAK İÇİN TIKLA</div>

    <div id="zartarant-panel">
        <div class="hack-title">ZARTARANT HACK</div>
        <div class="btn" onclick="applySkin('PRIME')">ASİL SKIN HACK</div>
        <div class="btn" onclick="applySkin('ELDERFLAME')">EJDER SKIN HACK</div>
        <div class="btn" onclick="applySkin('ION')">İON SKIN HACK</div>
        <hr>
        <div class="btn" onclick="toggleCheat('esp')">SKELETON ESP: <span id="c-esp" style="color:#ff4655">KAPALI</span></div>
        <div class="btn" onclick="toggleCheat('aim')">AIMBOT: <span id="c-aim" style="color:#ff4655">KAPALI</span></div>
    </div>

    <div id="crosshair"></div>
    <div id="hud">
        <div class="stat">CAN: <span id="hp-val">100</span></div>
        <div class="stat">ZARTARANT v1.0</div>
    </div>

    <script type="importmap"> { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } } </script>

    <script type="module">
        import * as THREE from 'three';

        let cheats = { esp: false, aim: false };
        let enemies = [], walls = [], collisionBoxes = [], keys = {};
        let isLocked = false;

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x050505);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.rotation.order = 'YXZ';

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));

        // --- ASCENT HARİTASI VE FİZİKLER ---
        function addSolidWall(w, h, d, x, z, col=0x333333) {
            const m = new THREE.Mesh(new THREE.BoxGeometry(w, h, d), new THREE.MeshStandardMaterial({color: col}));
            m.position.set(x, h/2, z);
            scene.add(m);
            walls.push(m);
            collisionBoxes.push(new THREE.Box3().setFromObject(m));
        }

        addSolidWall(200, 0.1, 200, 0, 0, 0x111111); // Yer
        addSolidWall(50, 10, 2, 0, -20); // Duvar 1
        addSolidWall(2, 10, 50, -25, 0); // Duvar 2
        addSolidWall(5, 5, 5, 10, -10, 0x00ffcc); // Kutu

        // --- SİLAH SİSTEMİ ---
        const gunGroup = new THREE.Group();
        const gunBody = new THREE.Mesh(new THREE.BoxGeometry(0.15, 0.2, 0.8), new THREE.MeshStandardMaterial({color: 0x222222}));
        const gunGlow = new THREE.Mesh(new THREE.BoxGeometry(0.16, 0.05, 0.4), new THREE.MeshStandardMaterial({color: 0xff4655, emissive: 0xff4655, emissiveIntensity: 2}));
        gunGlow.position.set(0, 0.1, -0.2);
        gunGroup.add(gunBody, gunGlow);
        gunGroup.position.set(0.4, -0.4, -0.6);
        camera.add(gunGroup);
        scene.add(camera);

        window.applySkin = (type) => {
            if(type === 'PRIME') { gunBody.material.color.setHex(0xd4af37); gunGlow.material.emissive.setHex(0x00ffff); }
            if(type === 'ELDERFLAME') { gunBody.material.color.setHex(0x550000); gunGlow.material.emissive.setHex(0xffaa00); }
            if(type === 'ION') { gunBody.material.color.setHex(0xffffff); gunGlow.material.emissive.setHex(0x00ffff); }
        };

        // --- MOUSE VE KLAVYE KONTROLLERİ (GARANTİ) ---
        const startDiv = document.getElementById('click-to-start');
        startDiv.addEventListener('click', () => {
            document.body.requestPointerLock();
        });

        document.addEventListener('pointerlockchange', () => {
            isLocked = (document.pointerLockElement === document.body);
            startDiv.style.display = isLocked ? 'none' : 'flex';
            if(!isLocked) keys = {}; // Tuşları sıfırla
        });

        document.addEventListener('mousemove', (e) => {
            if(isLocked) {
                camera.rotation.y -= e.movementX * 0.002;
                camera.rotation.x = Math.max(-1.5, Math.min(1.5, camera.rotation.x - e.movementY * 0.002));
            }
        });

        window.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            if(e.code === 'Insert') {
                const p = document.getElementById('zartarant-panel');
                p.style.display = p.style.display === 'block' ? 'none' : 'block';
                if(p.style.display === 'block') document.exitPointerLock();
            }
        });
        window.addEventListener('keyup', (e) => keys[e.code] = false);

        // --- BOT SİSTEMİ ---
        function spawn() {
            const g = new THREE.Group();
            const b = new THREE.Mesh(new THREE.BoxGeometry(0.8, 1.6, 0.4), new THREE.MeshStandardMaterial({color: 0xff4655}));
            const skelMat = new THREE.LineBasicMaterial({color: 0xff0000, depthTest: false, transparent: true, opacity: 0});
            const points = [new THREE.Vector3(0,0.8,0), new THREE.Vector3(0,-0.8,0), new THREE.Vector3(-0.4,0.4,0), new THREE.Vector3(0.4,0.4,0)];
            const line = new THREE.LineSegments(new THREE.BufferGeometry().setFromPoints(points), skelMat);
            line.renderOrder = 999;
            g.add(b, line);
            g.userData = { hp: 100, skel: line };
            g.position.set((Math.random()-0.5)*40, 0.8, -10 - Math.random()*20);
            scene.add(g); enemies.push(g);
        }
        for(let i=0; i<6; i++) spawn();

        window.toggleCheat = (t) => {
            cheats[t] = !cheats[t];
            document.getElementById('c-'+t).innerText = cheats[t] ? 'AÇIK' : 'KAPALI';
            if(t === 'esp') enemies.forEach(e => e.userData.skel.material.opacity = cheats.esp ? 1 : 0);
        };

        // --- ANA DÖNGÜ VE FİZİK ---
        function animate() {
            requestAnimationFrame(animate);
            if(isLocked) {
                const speed = 0.15;
                const forward = new THREE.Vector3();
                camera.getWorldDirection(forward); forward.y = 0; forward.normalize();
                const right = new THREE.Vector3().crossVectors(forward, camera.up).negate();

                let nextPos = camera.position.clone();
                if(keys['KeyW']) nextPos.add(forward.clone().multiplyScalar(speed));
                if(keys['KeyS']) nextPos.add(forward.clone().multiplyScalar(-speed));
                if(keys['KeyA']) nextPos.add(right.clone().multiplyScalar(-speed));
                if(keys['KeyD']) nextPos.add(right.clone().multiplyScalar(speed));

                // Çarpışma Kontrolü
                const pBox = new THREE.Box3().setFromCenterAndSize(new THREE.Vector3(nextPos.x, 1, nextPos.z), new THREE.Vector3(1, 1.8, 1));
                let collision = false;
                for(let box of collisionBoxes) { if(pBox.intersectsBox(box)) collision = true; }

                if(!collision) {
                    camera.position.x = nextPos.x;
                    camera.position.z = nextPos.z;
                }
                camera.position.y = 1.6;

                if(cheats.aim && enemies.length > 0) camera.lookAt(enemies[0].position.x, 1.8, enemies[0].position.z);
                enemies.forEach(b => { b.lookAt(camera.position.x, 0.8, camera.position.z); b.translateZ(0.02); });
            }
            renderer.render(scene, camera);
        }
        animate();

        // ATEŞ
        window.addEventListener('mousedown', () => {
            if(!isLocked) return;
            const ray = new THREE.Raycaster();
            ray.setFromCamera(new THREE.Vector2(0,0), camera);
            const hits = ray.intersectObjects(enemies, true);
            if(hits.length > 0) {
                let target = hits[0].object.parent;
                target.userData.hp -= 50;
                if(target.userData.hp <= 0) { scene.remove(target); enemies.splice(enemies.indexOf(target),1); spawn(); }
            }
        });
    </script>
</body>
</html>